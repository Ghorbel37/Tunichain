{
  "_format": "hh3-artifact-1",
  "contractName": "VATControl",
  "sourceName": "contracts/VATControl.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "invoiceAddr",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "paymentAddr",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "seller",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "paymentId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountPaid",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "vatRatePermille",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "vatAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "sellerTotalVatPaid",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "VATPaymentRecorded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "oldRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "VATRateUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "seller",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "taxableAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "vatRatePermille",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "vatAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "sellerTotalTaxBase",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "VATRecorded",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "seller",
          "type": "address"
        }
      ],
      "name": "getSellerVATOutstanding",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "outstandingVat",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "seller",
          "type": "address"
        }
      ],
      "name": "getSellerVATTotals",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalTaxBase",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalVatPaid",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalVatOwed",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "invoiceReg",
      "outputs": [
        {
          "internalType": "contract IInvoiceMinimal",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "paymentReg",
      "outputs": [
        {
          "internalType": "contract IPaymentMinimal",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "invoiceId",
          "type": "uint256"
        }
      ],
      "name": "recordInvoiceTax",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "paymentId",
          "type": "uint256"
        }
      ],
      "name": "recordPayment",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "sellerTaxBase",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "sellerVatOwed",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "sellerVatPaid",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "r",
          "type": "uint256"
        }
      ],
      "name": "setVatRatePermille",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "vatRatePermille",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405260be600555348015610014575f5ffd5b50604051610f68380380610f688339818101604052810190610036919061011a565b815f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508060015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050610158565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100e9826100c0565b9050919050565b6100f9816100df565b8114610103575f5ffd5b50565b5f81519050610114816100f0565b92915050565b5f5f604083850312156101305761012f6100bc565b5b5f61013d85828601610106565b925050602061014e85828601610106565b9150509250929050565b610e03806101655f395ff3fe608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635f51388e1161006f5780635f51388e14610163578063a85954a714610193578063b2a81b54146101af578063df7cb9e1146101e1578063e634eb4314610211578063fefa92911461022f576100a7565b8063045a05a0146100ab57806314fcf072146100db57806317ee0876146100f957806333503fb4146101155780634c6672bb14610133575b5f5ffd5b6100c560048036038101906100c0919061094b565b61024b565b6040516100d2919061098e565b60405180910390f35b6100e3610260565b6040516100f0919061098e565b60405180910390f35b610113600480360381019061010e91906109d1565b610266565b005b61011d610467565b60405161012a9190610a57565b60405180910390f35b61014d6004803603810190610148919061094b565b61048c565b60405161015a919061098e565b60405180910390f35b61017d6004803603810190610178919061094b565b6104a1565b60405161018a919061098e565b60405180910390f35b6101ad60048036038101906101a891906109d1565b6104b6565b005b6101c960048036038101906101c4919061094b565b610502565b6040516101d893929190610a70565b60405180910390f35b6101fb60048036038101906101f6919061094b565b6105cc565b604051610208919061098e565b60405180910390f35b610219610675565b6040516102269190610ac5565b60405180910390f35b610249600480360381019061024491906109d1565b610699565b005b6003602052805f5260405f205f915090505481565b60055481565b5f5f5f5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634e6d1405856040518263ffffffff1660e01b81526004016102c2919061098e565b60c060405180830381865afa1580156102dd573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103019190610b39565b5094509450509350505f6103e8828461031a9190610bef565b6103249190610c5d565b90508260025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546103729190610c8d565b925050819055508060045f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546103c59190610c8d565b92505081905550848473ffffffffffffffffffffffffffffffffffffffff167f585dcafe267d178b1b269c09830af63b3394cd17f137ea5e14a833954c9e375b85858560025f8b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205442604051610458959493929190610cc0565b60405180910390a35050505050565b60015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6004602052805f5260405f205f915090505481565b6002602052805f5260405f205f915090505481565b5f6005549050816005819055507f71dbc0d35f0e0c1d3810c24088c47811d0609cead6459a0fcd3aad21c8ea40618183426040516104f693929190610a70565b60405180910390a15050565b5f5f5f60025f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054925060035f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054915060045f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490509193909250565b5f5f60045f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490505f60035f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508082111561066a5780826106639190610d11565b925061066e565b5f92505b5050919050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b5f5f60015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166387d81789846040518263ffffffff1660e01b81526004016106f5919061098e565b60c060405180830381865afa158015610710573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107349190610d44565b50945050935050505f5f5f5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634e6d1405866040518263ffffffff1660e01b8152600401610798919061098e565b60c060405180830381865afa1580156107b3573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107d79190610b39565b5094509450509350505f6103e882846107f09190610bef565b6107fa9190610c5d565b90508060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546108489190610c8d565b9250508190555085878573ffffffffffffffffffffffffffffffffffffffff167f3dd6a2fba6560751516d6620784b814525b4f098ec9465df23461079706e0d2188868660035f8c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054426040516108dc959493929190610cc0565b60405180910390a450505050505050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61091a826108f1565b9050919050565b61092a81610910565b8114610934575f5ffd5b50565b5f8135905061094581610921565b92915050565b5f602082840312156109605761095f6108ed565b5b5f61096d84828501610937565b91505092915050565b5f819050919050565b61098881610976565b82525050565b5f6020820190506109a15f83018461097f565b92915050565b6109b081610976565b81146109ba575f5ffd5b50565b5f813590506109cb816109a7565b92915050565b5f602082840312156109e6576109e56108ed565b5b5f6109f3848285016109bd565b91505092915050565b5f819050919050565b5f610a1f610a1a610a15846108f1565b6109fc565b6108f1565b9050919050565b5f610a3082610a05565b9050919050565b5f610a4182610a26565b9050919050565b610a5181610a37565b82525050565b5f602082019050610a6a5f830184610a48565b92915050565b5f606082019050610a835f83018661097f565b610a90602083018561097f565b610a9d604083018461097f565b949350505050565b5f610aaf82610a26565b9050919050565b610abf81610aa5565b82525050565b5f602082019050610ad85f830184610ab6565b92915050565b5f81519050610aec816109a7565b92915050565b5f81519050610b0081610921565b92915050565b5f819050919050565b610b1881610b06565b8114610b22575f5ffd5b50565b5f81519050610b3381610b0f565b92915050565b5f5f5f5f5f5f60c08789031215610b5357610b526108ed565b5b5f610b6089828a01610ade565b9650506020610b7189828a01610af2565b9550506040610b8289828a01610b25565b9450506060610b9389828a01610ade565b9350506080610ba489828a01610ade565b92505060a0610bb589828a01610ade565b9150509295509295509295565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610bf982610976565b9150610c0483610976565b9250828202610c1281610976565b91508282048414831517610c2957610c28610bc2565b5b5092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b5f610c6782610976565b9150610c7283610976565b925082610c8257610c81610c30565b5b828204905092915050565b5f610c9782610976565b9150610ca283610976565b9250828201905080821115610cba57610cb9610bc2565b5b92915050565b5f60a082019050610cd35f83018861097f565b610ce0602083018761097f565b610ced604083018661097f565b610cfa606083018561097f565b610d07608083018461097f565b9695505050505050565b5f610d1b82610976565b9150610d2683610976565b9250828203905081811115610d3e57610d3d610bc2565b5b92915050565b5f5f5f5f5f5f60c08789031215610d5e57610d5d6108ed565b5b5f610d6b89828a01610ade565b9650506020610d7c89828a01610af2565b9550506040610d8d89828a01610ade565b9450506060610d9e89828a01610b25565b9350506080610daf89828a01610ade565b92505060a0610dc089828a01610ade565b915050929550929550929556fea26469706673582212203966c0e159fca56d77a3467148306d0d721802bbb64a8a295cf53315f22b772b64736f6c634300081c0033",
  "deployedBytecode": "0x608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635f51388e1161006f5780635f51388e14610163578063a85954a714610193578063b2a81b54146101af578063df7cb9e1146101e1578063e634eb4314610211578063fefa92911461022f576100a7565b8063045a05a0146100ab57806314fcf072146100db57806317ee0876146100f957806333503fb4146101155780634c6672bb14610133575b5f5ffd5b6100c560048036038101906100c0919061094b565b61024b565b6040516100d2919061098e565b60405180910390f35b6100e3610260565b6040516100f0919061098e565b60405180910390f35b610113600480360381019061010e91906109d1565b610266565b005b61011d610467565b60405161012a9190610a57565b60405180910390f35b61014d6004803603810190610148919061094b565b61048c565b60405161015a919061098e565b60405180910390f35b61017d6004803603810190610178919061094b565b6104a1565b60405161018a919061098e565b60405180910390f35b6101ad60048036038101906101a891906109d1565b6104b6565b005b6101c960048036038101906101c4919061094b565b610502565b6040516101d893929190610a70565b60405180910390f35b6101fb60048036038101906101f6919061094b565b6105cc565b604051610208919061098e565b60405180910390f35b610219610675565b6040516102269190610ac5565b60405180910390f35b610249600480360381019061024491906109d1565b610699565b005b6003602052805f5260405f205f915090505481565b60055481565b5f5f5f5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634e6d1405856040518263ffffffff1660e01b81526004016102c2919061098e565b60c060405180830381865afa1580156102dd573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103019190610b39565b5094509450509350505f6103e8828461031a9190610bef565b6103249190610c5d565b90508260025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546103729190610c8d565b925050819055508060045f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546103c59190610c8d565b92505081905550848473ffffffffffffffffffffffffffffffffffffffff167f585dcafe267d178b1b269c09830af63b3394cd17f137ea5e14a833954c9e375b85858560025f8b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205442604051610458959493929190610cc0565b60405180910390a35050505050565b60015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6004602052805f5260405f205f915090505481565b6002602052805f5260405f205f915090505481565b5f6005549050816005819055507f71dbc0d35f0e0c1d3810c24088c47811d0609cead6459a0fcd3aad21c8ea40618183426040516104f693929190610a70565b60405180910390a15050565b5f5f5f60025f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054925060035f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054915060045f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490509193909250565b5f5f60045f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490505f60035f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508082111561066a5780826106639190610d11565b925061066e565b5f92505b5050919050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b5f5f60015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166387d81789846040518263ffffffff1660e01b81526004016106f5919061098e565b60c060405180830381865afa158015610710573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107349190610d44565b50945050935050505f5f5f5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634e6d1405866040518263ffffffff1660e01b8152600401610798919061098e565b60c060405180830381865afa1580156107b3573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107d79190610b39565b5094509450509350505f6103e882846107f09190610bef565b6107fa9190610c5d565b90508060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546108489190610c8d565b9250508190555085878573ffffffffffffffffffffffffffffffffffffffff167f3dd6a2fba6560751516d6620784b814525b4f098ec9465df23461079706e0d2188868660035f8c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054426040516108dc959493929190610cc0565b60405180910390a450505050505050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61091a826108f1565b9050919050565b61092a81610910565b8114610934575f5ffd5b50565b5f8135905061094581610921565b92915050565b5f602082840312156109605761095f6108ed565b5b5f61096d84828501610937565b91505092915050565b5f819050919050565b61098881610976565b82525050565b5f6020820190506109a15f83018461097f565b92915050565b6109b081610976565b81146109ba575f5ffd5b50565b5f813590506109cb816109a7565b92915050565b5f602082840312156109e6576109e56108ed565b5b5f6109f3848285016109bd565b91505092915050565b5f819050919050565b5f610a1f610a1a610a15846108f1565b6109fc565b6108f1565b9050919050565b5f610a3082610a05565b9050919050565b5f610a4182610a26565b9050919050565b610a5181610a37565b82525050565b5f602082019050610a6a5f830184610a48565b92915050565b5f606082019050610a835f83018661097f565b610a90602083018561097f565b610a9d604083018461097f565b949350505050565b5f610aaf82610a26565b9050919050565b610abf81610aa5565b82525050565b5f602082019050610ad85f830184610ab6565b92915050565b5f81519050610aec816109a7565b92915050565b5f81519050610b0081610921565b92915050565b5f819050919050565b610b1881610b06565b8114610b22575f5ffd5b50565b5f81519050610b3381610b0f565b92915050565b5f5f5f5f5f5f60c08789031215610b5357610b526108ed565b5b5f610b6089828a01610ade565b9650506020610b7189828a01610af2565b9550506040610b8289828a01610b25565b9450506060610b9389828a01610ade565b9350506080610ba489828a01610ade565b92505060a0610bb589828a01610ade565b9150509295509295509295565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610bf982610976565b9150610c0483610976565b9250828202610c1281610976565b91508282048414831517610c2957610c28610bc2565b5b5092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b5f610c6782610976565b9150610c7283610976565b925082610c8257610c81610c30565b5b828204905092915050565b5f610c9782610976565b9150610ca283610976565b9250828201905080821115610cba57610cb9610bc2565b5b92915050565b5f60a082019050610cd35f83018861097f565b610ce0602083018761097f565b610ced604083018661097f565b610cfa606083018561097f565b610d07608083018461097f565b9695505050505050565b5f610d1b82610976565b9150610d2683610976565b9250828203905081811115610d3e57610d3d610bc2565b5b92915050565b5f5f5f5f5f5f60c08789031215610d5e57610d5d6108ed565b5b5f610d6b89828a01610ade565b9650506020610d7c89828a01610af2565b9550506040610d8d89828a01610ade565b9450506060610d9e89828a01610b25565b9350506080610daf89828a01610ade565b92505060a0610dc089828a01610ade565b915050929550929550929556fea26469706673582212203966c0e159fca56d77a3467148306d0d721802bbb64a8a295cf53315f22b772b64736f6c634300081c0033",
  "linkReferences": {},
  "deployedLinkReferences": {},
  "immutableReferences": {},
  "inputSourceName": "project/contracts/VATControl.sol",
  "buildInfoId": "solc-0_8_28-8b135aa8ae89f51b1074f4c5a44f59b738e87cec"
}